import{g as a,a as e,r as t,s as l,l as s,c as i,w as d,i as o,o as n,b as c,d as r,t as u,f as p,k as f}from"./index-XRL4FCaQ.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const m=h({data:()=>({detail:{project:"",date:"",time:"",person:""},id:0}),onLoad(a){a.id&&(this.getDetail(a.id),this.id=a.id)},methods:{async getDetail(s){try{const i=a("token"),d=await e({url:"http://ebbhospital.binglang6.com/api/appoint-view",method:"GET",data:{id:s},header:{Authorization:"bearer "+i}});if(200===d.data.code){const a=d.data.data;this.detail.project=a.project,this.detail.date=a.date,this.detail.time=a.time,this.detail.person=a.person}else 401===d.data.code?t({url:"/pages/login/login"}):l({title:d.data.msg||"获取详情失败",icon:"none"})}catch(i){console.error("Get detail error:",i),l({title:"获取详情失败",icon:"none"})}},handleCancel(){s({title:"提示",content:"确认要销号吗？",success:async s=>{if(s.confirm)try{const s=a("token"),i=await e({url:"http://ebbhospital.binglang6.com/api/appoint-done",method:"GET",data:{id:this.id},header:{Authorization:"bearer "+s}});200===i.data.code?(l({title:"销号成功",icon:"success"}),setTimeout((()=>{t({url:"/pages/index/index"})}),1500)):401===i.data.code?t({url:"/pages/login/login"}):l({title:i.data.msg||"销号失败",icon:"none"})}catch(i){console.error("Cancel error:",i),l({title:"销号失败",icon:"none"})}}})}}},[["render",function(a,e,t,l,s,h){const m=p,_=o,g=f;return n(),i(_,{class:"detail-container"},{default:d((()=>[c(_,{class:"card"},{default:d((()=>[c(_,{class:"info-item"},{default:d((()=>[c(m,{class:"label"},{default:d((()=>[r("预约项目")])),_:1}),c(m,{class:"value"},{default:d((()=>[r(u(s.detail.project),1)])),_:1})])),_:1}),c(_,{class:"divider"}),c(_,{class:"info-item"},{default:d((()=>[c(m,{class:"label"},{default:d((()=>[r("预约日期")])),_:1}),c(m,{class:"value"},{default:d((()=>[r(u(s.detail.date),1)])),_:1})])),_:1}),c(_,{class:"divider"}),c(_,{class:"info-item"},{default:d((()=>[c(m,{class:"label"},{default:d((()=>[r("预约时间")])),_:1}),c(m,{class:"value"},{default:d((()=>[r(u(s.detail.time),1)])),_:1})])),_:1}),c(_,{class:"divider"}),c(_,{class:"info-item"},{default:d((()=>[c(m,{class:"label"},{default:d((()=>[r("预约人")])),_:1}),c(m,{class:"value"},{default:d((()=>[r(u(s.detail.person),1)])),_:1})])),_:1})])),_:1}),c(g,{onClick:h.handleCancel,class:"cancel-btn"},{default:d((()=>[r("确认销号")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-37352700"]]);export{m as default};
